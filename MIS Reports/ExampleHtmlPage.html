
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
    <meta name="description" content="Developed By M Abdur Rokib Promy">
    <meta name="keywords" content="Admin, Bootstrap 3, Template, Theme, Responsive">

    <title></title>

    <link href="../css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="../css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <link href="../css/ionicons.min.css" rel="stylesheet" type="text/css" />
    <link href="../css/morris/morris.css" rel="stylesheet" type="text/css" />
    
    <link href="../css/Stockist.css" rel="stylesheet" type="text/css" />
    <link href="../css/style1.css" rel="stylesheet" type="text/css" />
    
    <link href="../../css/bootstrap-3.3.2.min.css" rel="stylesheet" />
    <link href="../../css/style.css" rel="stylesheet" />

    <link href="https://cdn.datatables.net/1.13.1/css/jquery.dataTables.min.css" rel="stylesheet" type="text/css" />

   
</head>
<body>
    <div class="container" style="max-width: 100%; width: 100%">
        <br />
        <div class="row">
            <div class="col-md-12">

                <div class="col-md-4">
                    <label id="Label2" class="col-md-2 col-md-offset-3 control-label">
                        Division
                    </label>
                    <div class="input-group">
                        <span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>
                        <select id="ddlsubdiv" class="form-control">
                            <option value="0">--Select--</option>
                        </select>

                    </div>
                </div>


                <div class="col-md-4 inputGroupContainer">
                    <label for="ddlFF" class="col-md-2 col-md-offset-3 control-label">
                        Manager
                    </label>
                    <div class="input-group">
                        <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                        <select id="ddlFieldForce" class="form-control">
                            <option value="0">--Select--</option>
                        </select>

                    </div>
                </div>

                <div class="col-md-4 inputGroupContainer">
                    <label id="lblFYear" class="col-md-2  col-md-offset-3  control-label">
                        Year
                    </label>
                    <div class="input-group">
                        <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                        <select id="ddlFYear" class="form-control">
                            <option value="0">--Select--</option>
                        </select>
                    </div>
                </div>

            </div>

        </div>
        <br />
        <div class="row">
            <div class="col-md-6  col-md-offset-5">
                <a id="btnGo" class="btn btn-primary" style="vertical-align: middle;"><span>View</span></a>
            </div>
        </div>
        <br />
        <div class="row">
            <table id="example" class="table table-bordered table-striped table-hover table-heading table-datatable" style="width:100%">
                <thead>
                    <tr>
                        <th id="Id">S.No</th>
                        <th id="Territory_Name">Route</th>
                        <th id="HQ">HQ</th>
                        <th id="Outlet_Code">Customer Code</th>
                        <th id="Outlet_Name">Customer Name</th>
                        <th id="Category">Category</th>
                        <th id="Channel">Channel</th>
                        <th id="Phone">Phone</th>
                        <th id="Address">Address</th>
                        <th id="Janv">Jan Visit</th>
                        <th id="Jan">Jan</th>
                        <th id="Febv">Feb Visit</th>
                        <th id="Feb">Feb</th>
                        <th id="Marv">Mar Visit</th>
                        <th id="Mar">Mar</th>
                        <th id="Aprv">Apr Visit</th>
                        <th id="Apr">Apr</th>
                        <th id="Mayv">May Visit</th>
                        <th id="May">May</th>
                        <th id="Junv">Jun Visit</th>
                        <th id="Jun">Jun</th>
                        <th id="Julv">Jul Visit</th>
                        <th id="Jul">Jul</th>
                        <th id="Augv">Aug Visit</th>
                        <th id="Aug">Aug</th>
                        <th id="Sepv">Sep Visit</th>
                        <th id="Sep">Sep</th>
                        <th id="Octv">Oct Visit</th>
                        <th id="Oct">Oct</th>
                        <th id="Novv">Nov Visit</th>
                        <th id="Nov">Nov</th>
                        <th id="Decv">Dec Visit</th>
                        <th id="Dec">Dec</th>
                        <th id="Total">Total</th>
                    </tr>
                </thead>
            </table>
        </div>
    </div>
    <script src="../js/lib/xls.core.min.js" type="text/javascript"></script>
    <script src="../js/lib/xlsx.core.min.js" type="text/javascript"></script>
    <script src="../js/lib/import_data.js" type="text/javascript"></script>
    <script src="../Scripts/jquery-3.6.0.js" type="text/javascript"></script>
    
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-json/2.6.0/jquery.json.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.4/css/jquery.dataTables.min.css" />
    <script src="../Scripts/DataTables/jquery.dataTables.js"></script>
  
    <script src="https://cdn.datatables.net/1.13.1/js/jquery.dataTables.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            //alert('<%Session("div_code")%>');
            //var divcode = HttpContext.Session["div_code"];
            //alert(divcode);
            //BindYear(divcode);
            var divcode = "100";
            var sfcode = "admin";
            var SubDiv = "0";
            var year = '2022';
            BindSubDiv(divcode); BindManagers(divcode, sfcode, SubDiv); BindYear(divcode); BindData(divcode, sfcode, SubDiv, year);

         

            var Url = "/WebServiceDataTable.asmx/GetDataForDataTable?parameter=" + sfcode + "_" + divcode + "_" + SubDiv + "_" + year + "";
           

            //var table = $('#example').DataTable({
            //    "ajax": Url,
            //    "proccessing": true,
            //    "serverSide": true,
            //    //"ajax": {
            //    //    url: Url,
            //    //    type: 'POST'
            //    //},
            //    "language": {
            //        "search": "",
            //        "searchPlaceholder": "Search..."
            //    },
            //    "columns": [
            //        { 'data': 'Id' },
            //        { 'data': 'Route' },
            //        { 'data': 'HQ' },
            //        { 'data': 'Customer_Code' },
            //        { 'data': 'Customer_Name' }, { 'data': 'Category' }, { 'data': 'Channel' }, { 'data': 'Phone' },
            //        { 'data': 'Address' }, { 'data': 'Janv' }, { 'data': 'Jan' }, { 'data': 'Febv' }, { 'data': 'Feb' },
            //        { 'data': 'Marv' }, { 'data': 'Mar' }, { 'data': 'Aprv' }, { 'data': 'Apr' }, { 'data': 'Mayv' },
            //        { 'data': 'Mar' }, { 'data': 'Junv' }, { 'data': 'Jun' }, { 'data': 'Julv' }, { 'data': 'Jul' },
            //        { 'data': 'Augv' }, { 'data': 'Aug' }, { 'data': 'Sepv' }, { 'data': 'Sep' }, { 'data': 'Octv' },
            //        { 'data': 'Oct' }, { 'data': 'Novv' }, { 'data': 'Nov' }, { 'data': 'Decv' }, { 'data': 'Dec' },
            //        { 'data': 'Total' }
            //    ],
            //    "order": [[1, 'asc']]
            //});



            //$.ajax({
            //    url: '/WebServiceDataTable.asmx/GetDataForDataTable',
            //    method: 'get',
            //    dataType: 'json',
            //    data: "{'divcode':'" + divcode + "','Sf_Code':'" + sfcode + "','subdiv':'" + SubDiv + "','year':'" + year + "' }",
            //    success: function (data) {
            //        $('#example').dataTable({
            //            paging: true,
            //            sort: true,
            //            searching: true,
            //            data: data,
            //            columns: [
            //                { 'data': 'RowNumber' },
            //                { 'data': 'Route' },
            //                { 'data': 'HQ' },
            //                { 'data': 'Customer_Code' },
            //                { 'data': 'Customer_Name' }, { 'data': 'Category' }, { 'data': 'Channel' }, { 'data': 'Phone' },
            //                { 'data': 'Address' }, { 'data': 'Janv' }, { 'data': 'Jan' }, { 'data': 'Febv' }, { 'data': 'Feb' },
            //                { 'data': 'Marv' }, { 'data': 'Mar' }, { 'data': 'Aprv' }, { 'data': 'Apr' }, { 'data': 'Mayv' },
            //                { 'data': 'Mar' }, { 'data': 'Junv' }, { 'data': 'Jun' }, { 'data': 'Julv' }, { 'data': 'Jul' },
            //                { 'data': 'Augv' }, { 'data': 'Aug' }, { 'data': 'Sepv' }, { 'data': 'Sep' }, { 'data': 'Octv' },
            //                { 'data': 'Oct' }, { 'data': 'Novv' }, { 'data': 'Nov' }, { 'data': 'Decv' }, { 'data': 'Dec' },
            //                { 'data': 'Total' }

            //            ],
            //            error: function () {
            //                alert("Get DataTable Error");
            //            },
            //        });
            //    },
            //});


        });

        function BindSubDiv(divcode) {
            $.ajax({
                type: "POST",
                url: "/WebServiceDataTable.asmx/GetSubDivision",
                data: "{div_code:'" + divcode + "' }",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    console.log(data.d);

                    var data1 = data.d;

                    var ddlsubdiv = $("[id*=ddlsubdiv]");
                    ddlsubdiv.empty().append('<option selected="selected" value="0">Please select</option>');

                    var html = "";

                    for (var i = 0; i < data1.length; i++) {
                        html = html + '<option value="' +
                            data1[i].subdivision_code + '">' + data1[i].subdivision_name + '</option>';
                    }
                    ddlsubdiv.append(html);
                }
            });
        }

        function BindYear(divcode) {
            $.ajax({
                type: "POST",
                url: "/WebServiceDataTable.asmx/FillYear",
                data: "{div_code:'" + divcode + "' }",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    console.log(data.d);

                    var data1 = data.d;

                    var ddlFYear = $("[id*=ddlFYear]");
                    ddlFYear.empty().append('<option selected="selected" value="0">Please select</option>');

                    var html = "";

                    for (var i = 0; i < data1.length; i++) {
                        html = html + '<option value="' +
                            data1[i].Value + '">' + data1[i].Text + '</option>';
                    }
                    ddlFYear.append(html);
                }
            });
        }

        function BindManagers(divcode, sfcode, SubDiv) {

            $.ajax({
                type: "POST",
                url: "/WebServiceDataTable.asmx/FillMRManagers",
                data: "{divcode:'" + divcode + "',sfcode:'" + sfcode + "',SubDiv:'" + SubDiv + "' }",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    console.log(data.d);

                    var data1 = data.d;

                    var ddlFieldForce = $("[id*=ddlFieldForce]");
                    ddlFieldForce.empty().append('<option selected="selected" value="0">Please select</option>');

                    var html = "";

                    for (var i = 0; i < data1.length; i++) {
                        html = html + '<option value="' + data1[i].sf_Code + '">' + data1[i].sf_name + '</option>';
                    }
                    ddlFieldForce.append(html);
                }
            });
        }

        function BindData(divcode, sfcode, SubDiv, year) {

            var data1 = "";

            // Report DataTables Init
            // ===========================================
            $('#example').DataTable({
                processing: true,
                serverSide: true,
                lengthMenu: [
                    [100, 250, 500, -1],
                    [100, 250, 500, 'All'],
                ],
                scrollY: 500,
                scrollX: true,             
                ajax: {
                    
                    type: "POST",
                    url: "/WebServiceDataTable.asmx/GetDataForDataTable1",
                    data: { divcode: divcode, sfcode: sfcode, subdiv: SubDiv, years: year },
                    
                    dataType: "Json"
                    
                },                
                "columns": [
                    { 'data': 'Id' },
                    { 'data': 'Route' },
                    { 'data': 'HQ' },
                    { 'data': 'Customer_Code' },
                    { 'data': 'Customer_Name' }, { 'data': 'Category' }, { 'data': 'Channel' }, { 'data': 'Phone' },
                    { 'data': 'Address' }, { 'data': 'Janv' }, { 'data': 'Jan' }, { 'data': 'Febv' }, { 'data': 'Feb' },
                    { 'data': 'Marv' }, { 'data': 'Mar' }, { 'data': 'Aprv' }, { 'data': 'Apr' }, { 'data': 'Mayv' },
                    { 'data': 'Mar' }, { 'data': 'Junv' }, { 'data': 'Jun' }, { 'data': 'Julv' }, { 'data': 'Jul' },
                    { 'data': 'Augv' }, { 'data': 'Aug' }, { 'data': 'Sepv' }, { 'data': 'Sep' }, { 'data': 'Octv' },
                    { 'data': 'Oct' }, { 'data': 'Novv' }, { 'data': 'Nov' }, { 'data': 'Decv' }, { 'data': 'Dec' },
                    { 'data': 'Total' }
                ],
                "order": [[0, "asc"]]
            });


        }

    </script>
</body>
</html>