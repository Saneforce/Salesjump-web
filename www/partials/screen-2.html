<ion-view>
   <ion-content>
      <!--        <a-select ng-model="currentSelection.name" field="name" data-options="worktype" data-label="{{'Select an option'}}"  data-change-callback="callback(value)">
         </a-select>-->
      <div class="list list-inset">
         <div class="select-component" ng-if="fmcgData.customer.selected.id == 1  &&PhoneOrderND!=0  ||fmcgData.customer.selected.id == 3  &&PhoneOrderND!=0 ">
            <div class="label">
               <div class="label-text">Order Type</div>
            </div>
            <div class="select-box" >
               <div class="input-box">
                  <div class="input-css" ng-click="vibrate();openModal(PhoneOrderType,99)">
                     {{(fmcgData.PhoneOrderTypes.selected.id| getValueforIDD : {'collection' : PhoneOrderType}).name || "Field Order"}}
                  </div>
               </div>
            </div>
         </div>
         <div class="select-component" ng-if="fmcgData.customer.selected&&fmcgData.customer.selected.id != 7&&routeWise!=0">
           <!-- <button     ng-if="fmcgData.customer.selected.id == 1  && UNLNeed"  class="button button-assertive buttonClear pull-left" style="margin-top: -14px;margin-left: -83px;float: right;" ng-click="vibrate();
         Addnewretailer()">
      Add
      </button> -->

      

        
            <div class="label">

               <div class="label-text" ng-if="fmcgData.customer.selected.id == 1"  style="
    margin-top: -17px;
" >
                <div class = "row">
                   <div  class = "col col-30"> {{DrCap}}</div>
             
               <div  class = "col col-30" style="margin-left: 33px;"><span ng-if="precall==0" style="float:right;font-size: small;padding: 0px 9px;color: #ef4e3a;" ng-click="vibrate();ShowMapRoute()">FindRoute<span style="color:#ef4e3a;font-size: x-small;"></span></span></div>
                  <div class = "col col-30"> <span style="float:right;font-size: small;padding: 0px 9px;color: #ef4e3a;" ng-click="vibrate();Addnewretailer()">Add  <span style="color:#ef4e3a;font-size: x-small;"></span></span></div>
               </div></div>

               
               <div class="label-text" ng-if="fmcgData.customer.selected.id == 2">{{ChmCap}}</div>
               <div class="label-text" ng-if="fmcgData.customer.selected.id == 3">{{StkCap}}</div>
               <div class="label-text" ng-if="fmcgData.customer.selected.id == 4">{{NLCap}}</div>

            </div>
             
            <div class="select-box">

               <div class="input-box" ng-if="fmcgData.customer.selected.id == 3">
                 <div class="input-css" ng-click="vibrate();
                     openModal('stockist_master', 4, fmcgData.subordinate.selected.id)">
                     {{(fmcgData.stockist.selected.id| getValueforIDD : {'collection' : stockists}).name || "Select "+StkCap}}

                  </div>
               </div>
               <div class="input-box" ng-if="fmcgData.customer.selected.id == 2">
                  <div class="input-css" ng-click="vibrate();
                     openModal('chemist_master', 5, fmcgData.subordinate.selected.id)">
                     {{(fmcgData.chemist.selected.id| getValueforIDD : {'collection' : chemists}).name  || "Select "+ChmCap}}
                  </div>
               </div>
               <div class="input-box" ng-if="fmcgData.customer.selected.id == 1">
                  <div class="input-css" ng-if="fmcgData.editableOrder!=1" ng-click="vibrate();
                     openModal('doctor_master', 6, fmcgData.subordinate.selected.id)">
                     {{fmcgData.doctor.name || "Select "+DrCap}}
                  </div>
                  <div class="input-css" ng-if="fmcgData.editableOrder==1" ng-click="vibrate();
                     ">
                     {{(fmcgData.doctor.selected.id| getValueforIDD : {'collection' : doctors}).name  || "Select "+DrCap}}
                  </div>
               </div>
               <div class="input-box" ng-if="fmcgData.customer.selected.id == 4">
                  <div class="input-css" ng-click="vibrate();
                     openModal('unlisted_doctor_master', 7, fmcgData.subordinate.selected.id)">
                     {{(fmcgData.uldoctor.selected.id| getValueforIDD : {'collection' : uldoctors}).name  || "Select "+NLCap}}
                  </div>
               </div>
            </div>
         </div>





         <div class="select-component" ng-if="routeWise==0" >
            <div class="label">
               <div class="label-text">Retailer</div>
            </div>
            <div class="select-box">
               <div class="input-box">
                  <div class="input-css">{{fmcgData.doctor.name}}</div>
               </div>
            </div>
         </div>
         <!--        <div class="select-component" >
            <div class="label">
                <div class="label-text">POB</div>
            </div>
            <div class="select-box">
                <div class="input-box">
                    <input  type="number" ng-model="fmcgData.pob" class="input-css" placeholder="POB" ng-click="vibrate();"> 
                </div>
            </div>
            </div>  -->
         <div class="select-component" ng-hide="view_MR" ng-if="fmcgData.customer.selected&&fmcgData.customer.selected.id == 7">
            <div class="label">
               <div class="label-text">Headquarters</div>
            </div>
            <div class="select-box">
               <div class="input-box">
                  <div class="input-css" ng-click="openModal('subordinate_master', 18)">
                     {{(fmcgData.subordinate.selected.id| getValueforIDD : {'collection' : subordinates}).name || "Select the Headquarters"  }}
                  </div>
               </div>
            </div>
         </div>
         <div class="select-component" ng-if="fmcgData.customer.selected&&fmcgData.customer.selected.id == 7">
            <div class="label">
               <div class="label-text">Name Of the Distributor</div>
            </div>
            <div class="select-box">
               <div class="input-box">
                  <input type="text" class="input-css" ng-model="fmcgData.dh_Shop_Name" placeholder="Name of the Name">     
               </div>
            </div>
         </div>
         <div class="select-component" ng-if="fmcgData.customer.selected&&fmcgData.customer.selected.id == 7">
            <div class="label">
               <div class="label-text">Address</div>
            </div>
            <div class="select-box">
               <div class="input-box">
                  <input type="text" class="input-css" ng-model="fmcgData.dh_address" placeholder="Enter the Address">     
               </div>
            </div>
         </div>
         <div class="select-component" ng-if="fmcgData.customer.selected&&fmcgData.customer.selected.id == 7">
            <div class="label">
               <div class="label-text">area</div>
            </div>
            <div class="select-box">
               <div class="input-box">
                  <input type="text" class="input-css" ng-model="fmcgData.dh_area" placeholder="Area">     
               </div>
            </div>
         </div>
         <div class="select-component" ng-if="fmcgData.customer.selected&&fmcgData.customer.selected.id == 7">
            <div class="label">
               <div class="label-text">Contact Person Name</div>
            </div>
            <div class="select-box">
               <div class="input-box">
                  <input type="text" class="input-css" ng-model="fmcgData.dh_Contact_Person" placeholder="Contact Person Name">     
               </div>
            </div>
         </div>
         <div class="select-component" ng-if="fmcgData.customer.selected&&fmcgData.customer.selected.id == 7">
            <div class="label">
               <div class="label-text">Phone Number</div>
            </div>
            <div class="select-box">
               <div class="input-box">
                  <input type="text" class="input-css" ng-model="fmcgData.dh_Phone_Number" placeholder="Enter the Phone No">     
               </div>
            </div>
         </div>
         <div class="select-component" ng-if="fmcgData.customer.selected&&fmcgData.customer.selected.id == 3">
            <div class="label">
               <div class="label-text">Payment Type</div>
            </div>
            <div class="select-box" >
               <div class="input-box">
                  <div class="input-css" ng-click="vibrate();openModal(instrumenttypes,27)">
                     {{(fmcgData.instrumenttype.selected.id| getValueforIDD : {'collection' : instrumenttypes}).name || "Select Instrument Type"}}
                  </div>
               </div>
            </div>
         </div>







         <div class="select-component" style="margin-bottom:30px;" ng-if="fmcgData.customer.selected&&fmcgData.customer.selected.id == 3">
            <div class="label">
               <div class="label-text">Date Of Payment</div>
            </div>
            <div class="select-box">
               <div class="input-box">
                  <input  type="date" ng-model="fmcgData.dateofinst" class="input-css" placeholder="Date Of Instrument" ng-click="vibrate();"> 
               </div>
            </div>
         </div>
         <div class="select-component" ng-if="fmcgData.customer.selected&&fmcgData.customer.selected.id == 3">
            <div class="label">
               <div class="label-text">Collected Amount</div>
            </div>
            <div class="select-box">
               <div class="input-box">
                  <input type="number" ng-model="fmcgData.pob" class="input-css" placeholder="Collected Amount " ng-click="vibrate();"> 
               </div>
            </div>
         </div>
         <!-- <div class="select-component" ng-if="JointworkSetup!=1&&JWNeed!=1">
            <div class="label">
               <div class="label-text">Joint Work</div>
            </div>
            <div class="select-box">
               <div class="input-box">
                  <div class="input-css" ng-click="vibrate();
                     openModal('salesforce_master', 8, fmcgData.subordinate.selected.id)">
                     {{fmcgData.jointwork.name|| "Select JointWork"}}
                  </div>
               </div>
            </div>
         </div> -->
         <!-- <div class="gridStyle" ng-grid="gridOptions" style="height: 500px" ng-if="JWNeed==0">
         </div> -->

       <!--  <button  style="rgin-left: -83px;float: right;width: 84px;height: 0px;width: 100px;" ng-if="precall==0" class="button buttonClear  button-balanced pull-right" ng-click="vibrate();
         submit()" >FindRoute</button>  -->

          
         <ion-list style="font-size:16px;background-color: green"   ng-if="fmcgData.customer.selected.id == 1 &&precall==0">
            <div>
               <div class = "row">
                  <div class = "col col-30">Retailer Channel</div>
                  <div class = "col" style="color:green;">: {{vwPreCall.DrSpl|| "-"}}</div>
               </div>
           <!--     <div class = "row">
                 <button class="button button-assertive buttonClear pull-left" ng-click="vibrate();
         showMap()">
     Find Route
      </button>
               </div> -->
               <div class = "row">
                  <div class = "col col-30">Class</div>
                  <div class = "col" style="color:green;">: {{vwPreCall.DrCat|| "-"}}</div>
               </div>
                <div class = "row">
                  <div class = "col col-30">Potential</div>
                  <div class = "col" style="color:green;">: {{fmcgData.POt|| "-"}}</div>
               </div>
               <div class = "row">
                  <div class = "col col-30">Monthly Order Value</div>
                  <div class = "col" style="color:green;">: {{fmcgData.MOV|| "0"}}</div>
               </div>

               <!--                    <div class = "row">
                  <div class = "col col-30">Route Target</div>
                  <div class = "col" style="color:green;">: {{precall.rootTarget|| 0}}</div>
                  </div>
                  <div class = "row">
                  <div class = "col col-30">Productivity</div>
                  <div class = "col" style="color:green;">: {{precall.minProd|| 0}}</div>
                  </div>-->
               <div ng-repeat="item in StockistDetails track by $index">
                  <div class = "row">
                     <div class = "col col-30">{{StkCap}}</div>
                     <div class = "col">: 
                        <span ng-if="$index == 0"  style="color:green;">{{item.stockist_code|| "-"}}</span>
                        <span ng-if="$index > 0"  style="color:green;border-bottom: 1px solid black">{{item.stockist_code|| "-"}}</span>
                     </div>
                  </div>
                  <div class="row" ng-if="CollectedAmountSetup">
                     <div class="col col-30">Last 6 Order Average</div>
                     <div class="col" style="color:green;">: {{item.Avg|| "-"}}</div>
                  </div>
                  <div class="row" >
                     <div class="col" style="font-family:fantasy">Last Order Details</div>
                  </div>
                  <div class="row" style="background: lightgreen;font-size: 100%;font-family: verdan;">
                     <div class="col col-75">Product</div>
                     <div class="col col-25" style="text-align:right">Qty</div>
                  </div>
                  <div style="display:block;max-height:300px;overflow:auto">
                     <div class="row" style="    background: whitesmoke;font-size: 90%;font-family: verdan;" ng-repeat="itm in item.OrderDetails track by $index">
                        <div class="col col-75">{{itm.Product_Name}}</div>
                        <div class="col col-25" style="text-align:right">{{itm.Quantity}}</div>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col col-30">Last Order Amount</div>
                     <div class="col" style="color:green;">: {{item.LastOrderAmt|| "-"}}</div>
                  </div>
                  <!-- <div class="row" ng-if="CollectedAmountSetup">
                     <div class="col col-30">Out Standing Amount</div>
                     <div class="col" style="color:green;">: {{item.outStandingAmt|| "-"}}</div>
                  </div> -->
               </div>
               <div class = "row">
                  <div class = "col col-30">Last visited</div>
                  <div class = "col" style="color:green;">: {{vwPreCall.LVDt|| "-"}}</div>
               </div>
               <!--   <div class = "row">
                  <div class = "col col-30"> Call FeedBack</div>
                  <div class = "col" style="color:green;">: {{vwPreCall.CallFd|| "-"}}</div>
                  </div>-->
               <div class = "row">
                  <div class = "col col-30"> Remarks</div>
                  <div class = "col" style="color:green;">: {{vwPreCall.Rmks|| "-"}}</div>
               </div>
               <div class = "row">
                  <div class = "col col-30"> Mobile number</div>
                  <div class = "col" style="color:green;">: {{MobileNumber|| "-"}}</div>
               </div>
            </div>
         </ion-list>
         <div  ng-if="fmcgData.customer.selected.id == 1||fmcgData.customer.selected.id == 7||fmcgData.customer.selected.id == 3" style="margin-top: 20px;">
            <ion-radio style="display: none" ng-model="fmcgData.rx" ng-value="1" ng-init="fmcgData.rx = 1">Rx</ion-radio>
            <ion-radio style="display: none" ng-model="fmcgData.rx" ng-value="0">Non Rx</ion-radio>
            <!--  <div style="margin-top: 10px;" ng-if="CollectedAmountSetup==1 && fmcgData.customer.selected.id == 1">
               <div class="select-component">
               
                 <div class="label">
                     <div class="label-text">Collected Amount</div>
                 </div>
                 <div class="select-box">
                     <div class="input-box">
                         <input type="number" ng-model="fmcgData.pob" class="input-css" placeholder="collected " ng-click="vibrate();">
                     </div>
                 </div>
               </div>-->
            <div class="select-component" ng-if="CollectedAmountSetup && fmcgData.customer.selected.id == 1">
               <div class=" label">
                  <div class="label-text">Payment Type</div>
               </div>
               <div class="select-box">
                  <div class="input-box">
                     <div class="input-css" ng-click="vibrate();openModal(instrumenttypes,27)">
                        {{(fmcgData.instrumenttype.selected.id| getValueforIDD : {'collection' : instrumenttypes}).name || "Select Payment Type"}}
                     </div>
                  </div>
               </div>
            </div>
            <div class="select-component" ng-if="CollectedAmountSetup && fmcgData.customer.selected.id == 1">
               <div class="label">
                  <div class="label-text">Date Of Payment</div>
               </div>
               <div class="select-box">
                  <div class="input-box">
                     <input type="date" ng-model="fmcgData.dateofinst" class="input-css" placeholder="Date Of Payment" ng-click="vibrate();">
                  </div>
               </div>
            </div>
            <div class="select-component" ng-if="CollectedAmountSetup && fmcgData.customer.selected.id == 1">
               <div class="label">
                  <div class="label-text">Ref.No</div>
               </div>
               <div class="select-box">
                  <div class="input-box">
                     <input type="text" ng-model="fmcgData.PayRefNo" class="input-css" placeholder="Ref.No ( Cheque No, DD No,.. )" ng-click="vibrate();">
                  </div>
               </div>
            </div>
            <div ng-if="CollectedAmountSetup && AgnBillClct" style="margin:8px 0px;">
            <ion-list >
               <div         class="select-box" class="select-component"  ng-if="Pendinglistshow">
                  <div class="label"  >
                     <div class="col-100"   class="label-text">
                        <p style="color:  block;">Pending Bill List</p>
                     </div>
                  </div>
                  <div  ng-repeat="item in fmcgData.Pendinglist  track by $index" >
                     <div class="input-box">
                        <div class="row" >
                           <div class="col-33">
                              <p>BillNo</p>
                              <input type="number"   style="borderolid 1px #c4c4c4;width: 101px;"      class="efield ng-pristine ng-valid ng-valid-number"  ng-model="item.billno" placeholder="{{item.billno }}"   readonly="isReadOnly">
                           </div>
                           <div class="col-33" >
                              <p>Bill Amount</p>
                              <input type="number"   style="borderolid 1px #c4c4c4;width: 101px;" class="efield ng-pristine ng-valid ng-valid-number"  placeholder= "{{item.billamt}}" readonly="isReadOnly" >
                           </div>
                           <div class="col-33" >
                              <p>Date</p>
                              <input type="number"   style="borderolid 1px #c4c4c4;width: 101px;" class="efield ng-pristine ng-valid ng-valid-number"  placeholder= "{{item.date.date| date:'MM/dd/yyyy'}}" readonly="isReadOnly" >
                           </div>
                        </div>
                        <div class="row" >
                           <div class="col-33" >
                              <p>Balance Amount</p>
                              <input   type="number"    style="borderolid 1px #c4c4c4;width: 101px;" class="efield ng-pristine ng-valid ng-valid-number"       placeholder= "
                                 {{item.BalanceAmout}}" readonly="isReadOnly">
                           </div>
                           <div class="col-33" >
                              <p>Collected Amount</p>
                              <input  type="number"    style="borderolid 1px #c4c4c4;width: 101px;" class="efield ng-pristine ng-valid ng-valid-number"   ng-model="item.coll_amt" ng-focus="resetfBx(item,0)" ng-blur="resetlBx(item,0)"    placeholder= "Enter collected amount">
                           </div>

                           <div class="col-33" >
                              <p>Days</p>
                              <input  type="number"    style="borderolid 1px #c4c4c4;width: 101px;" class="efield ng-pristine ng-valid ng-valid-number"   placeholder= "
                                 {{difrentdate(item)}}">
                           </div>
                        </div>
                     </div>
                     <!--<div class="label-text" ng-if="fmcgData.editableOrder!=1" ngff-click="vibrate();
                        openModal('viewpendingbills', 62, fmcgData.subordinate.selected.id)">
                        {{fmcgData.doctor.name || "Select Billno"}}
                        </div>  -->
                     <br>
                     <hr>
                  </div>
               </div>
               <div  ng-show="noo" >
                  <div class="col-100"   class="label-text">
                     <p style="font-weight: 900;color: #ef4e3a;">No Pending Bills</p>
                  </div>
               </div>
            </ion-list>
            </div>
            <!-- <div class="col-md-12" style="margin: 0px 0px 18px 0px;" ng-if="fmcgData.customer.selected.id == 1 &&DemoGivenND==1" >
              <div class="form-group">
                  <label for="chkb_Checked" class="required" style="font-weight: 900;color: #1aacc3;">Demo Given</label>                                    
                  <label class="switch" style="float: right;">
                      <input type="checkbox" class="switch-input" ng-model="IsAccepted" ng-click="IsChked($event, IsAccepted)">
                      <span class="switch-label" data-on="YES" data-off="NO"></span>
                      <span class="switch-handle"></span>
                  </label>
               </div>
            </div> -->
            <div style="margin: 8px 0px;" ng-show="democheckIsVisible">

               <div class="label">
                   <div class="label-text">Person Name</div>

               </div>
               <div class="select-box" >
                   <div class="input-box"  >
                       <input type="text"   class="input-css" ng-model="fmcgData.demogiven" placeholder="Enter the Person Name"   maxlength="150">     
                   </div>
               </div>
            </div>


            <div class="select-component1">
               <div class="label">
                  <!--ng-if="template==1"-->
                  <div class="label-text">Remarks <span style="float:right;font-size: small;padding: 0px 9px;color: #05e68a;" ng-click="vibrate();openModal('nonreport_template_master', 15)">Templates  <span style="color:#989898;font-size: x-small;">v</span></span></div>
               </div>
               <textarea ng-model="fmcgData.remarks" rows="5" class="textarea-css" ng-click="vibrate();" placeholder="Enter the Remarks ( or ) Select from Template">
                     
                    </textarea>
            </div>
         </div>
         <div>
            <div class="row moveDown">
               <div class="col">
                  <div class='buttonC-container left-sidepull' ng-click="vibrate();openOptMenu()">
                     <div class="buttonC">
                        <i class="icon ion-images footer-icon" style="line-height: 45px;"></i>
                     </div>
                     <div class='buttonC-text'>Event Captures</div>
                  </div>
               </div>
            </div>
         </div>
         <div style="height: 75px">
         </div>
      </div>
   </ion-content>
   <ion-footer-bar class="bar-dark">
      <button class="button button-assertive buttonClear pull-left" ng-click="vibrate();
         goBack()">
      &nbsp;&nbsp;&nbsp;<i class="icon ion-arrow-left-c"></i>&nbsp;&nbsp;&nbsp;
      </button>
      <span style="display:none;width:90%">{{fmcgData.geoaddress}}</span>
      <button  ng-if="(fmcgData.customer.selected.id != 1||fmcgData.customer.selected.id != 7)&&routeWise!=0&&(SPNeed==0&&fmcgData.customer.selected.id == 3)" class="button  button-assertive buttonClear pull-right"ng-click="vibrate();
         goNext()">&nbsp;&nbsp;&nbsp;<i class="icon ion-arrow-right-c"></i>&nbsp;&nbsp;&nbsp;</button>


<button ng-if="fmcgData.customer.selected.id == 1 && PromoValND==1" class="button buttonClear  button-calm pull-center" ng-click="vibrate();
         goNextIncentive()">
      Incentive/Closing Stock
    </button>

      <button  ng-if="((
      fmcgData.customer.selected.id == 1||fmcgData.customer.selected.id == 7 ||fmcgData.customer.selected.id == 3 )&&routeWise!=0 )" class="button buttonClear  button-balanced pull-right" ng-click="vibrate();
         submit()" ng-hide="fmcgData.submitdis">Submit</button>
      <button ng-if="(fmcgData.customer.selected.id == 1 &&  fmcgData.editableOrder!=1&&routeWise!=0)||(SPNeed==1&&fmcgData.customer.selected.id == 3)" class="button buttonClear  button-calm pull-right" style="margin-right: 67px;"  ng-click="vibrate();
         goNext()">
      Order
      </button>
      <!--     this is for above gonext style style="margin-right: {{100*((fmcgData.customer.selected.id!=3)?fmcgData.customer.selected.id:0)}}px;" -->
      <button  ng-if="fmcgData.customer.selected.id == 1 &&  fmcgData.editableOrder!=1&&routeWise==0" class="button buttonClear button-calm pull-right" ng-click="vibrate();
         goNext()">Order</button>
   </ion-footer-bar>
</ion-view>